<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>haxx populi - mysql history munging</title>
  <meta name="description" content="tips and tricks from a working coder">
  <link rel="stylesheet" type="text/css" href="/css/site.css" />
</head>
<body>

  <header>
    <h1>
      <a class="header-span plain" rel="home" href="http://haxx.sinequanon.net/">haxx populi</a>
    </h1>
  </header>

  <article>

      <h1>mysql history munging</h1>

      <section id="meta">

          <div id="byline">
            by jja
            on <time datetime="2012-01-17T11:50:50-0700">2012-01-17</time>
          </div>

          Topics: <ul id="tags">
              <li class="tagitem">
                <a class="tag" href="/tag/mysql">mysql</a>
              </li>
          </ul>

      </section>

      <section id="post_content">

        <p>At work, I run the mysql clients on multiple hosts with multiple versions. My
home directory is a network mount and thus my .mysql_history file is shared
between all these hosts. Often the command history gets weirdly munged, with
spaces converted to <code>\040</code> -- the character sequence for the octal escape code
for ASCII space. Here's a little workaround/fix:</p>
<!-- more -->
<pre><code>/bin/sed 's/\040/ /g;' ~/.mysql_history &gt; ~/.mysql_history.space

/bin/mv -f ~/.mysql_history.space ~/.mysql_history
</code></pre>
<p>Make that into an alias or script. Just make sure you quit all instances of
the mysql client before running. Then when you restart, the history should get
reloaded correctly.</p>
<p>I haven't bothered to figure out why this is happening, i.e. what the version
problems are or 32/64 bit or readline/editline or the sequence of starting
multiple clients on multiple hosts...</p>
<h2>Comments</h2>
<p><a href="http://guilhembichot.blogspot.co.uk/">Guilhem Bichot</a> commented at 2012-09-12 02:33:09</p>
<p>Happend to me too. In my case, I have 2 terminals open, one with a 5.1 mysql command line client (linked with readline), one with a 5.6 mysql command line client (linked with  libedit).
So when I close 5.6 client, libedit writes history file with escaping of ' ' to 040, then I open 5.1 client whose readline reads 040 and shows it...
Fix: use new clients.</p>
<hr>
<p><a href="http://haxx.sinequanon.net/">jja</a> commented at 2012-09-12 11:25:15</p>
<p>Ahhh... I will look into libedit vs readline on my various clients. Thanks!</p>


      </section>

  </article>

  <div id="comment-form">
        (comments are closed)
  </div>

  <section id="nav">
        <a class="footer-span plain" href="/2011/10/grails-plugin-ckeditor-with-aspell">Previous: Grails plugin CKEditor with aspell</a>

        <a class="footer-span plain" href="/2014/08/grails-plugin-dependencies-issues">Next: grails plugin dependencies issues</a>
  </section>

  <footer>
    <a class="footer-span plain" rel="home" href="http://haxx.sinequanon.net/">Home</a>
  </footer>

</body>
</html>
